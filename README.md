# Проект trip (тестовое задание)

[Ссылка на проект в Vercel](https://trip-nine.vercel.app/)

## О проекте

Тестовое задание делится на две части:  
1. Верстка  
2. JS  

Примечание: все задания выполнены в рамках одного проекта (репозитория).

### 1. Верстка

**1.1** Сверстать страницу [по макету](https://www.figma.com/file/JyFQcxiynMH1i5ViWz4qi0/Layout-test-task) 

Требования:
* Принцип mobile-first;  
* Адаптив под экраны с брейкпоинтами 375px, 1440px;  
* Если вариантов времени рейсов больше, чем на 1 строку - в конце строки должна появиться кнопка "ещё...", при ее нажатии будут раскрываться остальные варианты;  
* В случае отсутствия надписи "1200₽ на причале" цена должна быть выровнена по центру относительно копки "подробнее".  

### <p style="color:#32CD32">Решение</span> - https://trip-nine.vercel.app/  
  

**1.2** В текст [статьи на странице](https://codepen.io/kizoso/pen/VwpeeRY) с адаптивной версткой менеджеры добавили таблицу. На десктопе таблицы выглядят хорошо, но в мобильной версии - появляется горизонтальный скролл, верстка едет. Что делать?  

### <p style="color:#32CD32">Решение</span> - https://trip-nine.vercel.app/pages/table.html
- завернуть таблицу в блок со свойством 'overflow-x: auto'

### 2. JS

**2.1 Билеты на событие**

После успешной покупки билетов на событие, данные попадают в список заказов. Список заказов сохраняется в таблице phpMyAdmin в виде:

id  | event_id  | event_date          | ticket_adult_price  | ticket_adult_quantity  | ticket_kid_price  | ticket_kid_quantity  | barcode   | user_id  | equal_price  | created
--- | --------- | ------------------- | ------------------- | ---------------------- | ----------------- | -------------------- | --------  | -------- | ------------ | -------------------
1   | 003       | 2021-08-21 13:00:00 | 700                 | 1                      | 450               | 0                    | 11111111  | 00451    | 700          | 2021-01-11 13:22:09
2   | 006       | 2021-07-29 18:00:00 | 1000                | 0                      | 800               | 2                    | 22222222  | 00364    | 1600         | 2021-01-12 16:62:08
3   | 003       | 2021-08-15 17:00:00 | 700                 | 4                      | 450               | 3                    | 33333333  | 00015    | 4150         | 2021-01-13 10:08:45

Где:  
* `id` - инкрементальный порядковый номер заказа  
* `event_id` - уникальный ид события. У каждого события есть свое название, описание, расписание, цены и свой уникальный `event_id` соответственно  
* `event_date` - дата и время на которое были куплены билеты  
* `ticket_adult_price` - цена взрослого билета на момент покупки  
* `ticket_adult_quantity` - количество купленных взрослых билетов в этом заказе  
* `ticket_kid_price` - цена детского билета на момент покупки  
* `ticket_kid_quantity` - количество купленных детских билетов в этом заказе  
* `barcode` уникальный штрих код заказа  
* `equal_price` - общая сумма заказа  
* `created` - дата создания заказа  

Вопросы:
1. Некоторые события нужно продавать с дополнительными типами билетов - льготный и групповой, у которых будут свои цены и название. Имеется информация, что вероятно, будут другие типы билетов, которые нужно будет добавить. Нужно уметь сохранять при заказе 2 дополнительных типа билета, льготный и групповой в бд.  
   **Задача** - Показать конечный вид таблицы с добавленными типами билетов. Объяснить свое решение.  
2. Часто посетители из одного заказа приходят не одновременно на события. Возникает необходимость чекинить их по отдельности. Для этого у каждого билета должен быть свой баркод. Если в одном заказе было куплено несколько билетов, 2 взрослых, 3 детских, 4 льготных - то должно быть 9 баркодов для каждого билета соответственно.  
   **Задача** - Показать конечный вид таблицы, где у каждого билета свой баркод. Объяснить свое решение.  

### <p style="color:#32CD32">Решение</span>

Разделить таблицу на две:
* Таблицу заказов - в ней будут храниться данные по заказу без детализации по каждому билету (id заказа, данные о событии, общее количество билетов и сумма, id пользователя и дата создания заказа);  
* Таблицу записей в заказах - в ней будет храниться информация о купленных билетах в рамках каждого заказа (id заказа, id типа билета (или сам тип билета), количество, цена, общая стоимость и массив с баркодами для билетов каждого типа).  

**Заказы**

id  | event_id  | event_date          | tickets | user_id | equal_price | created
--- | --------- | ------------------- |---------|---------|-------------| -------------------
1   | 003       | 2021-08-21 13:00:00 | 1       | 00451   | 700         | 2021-01-11 13:22:09
2   | 006       | 2021-07-29 18:00:00 | 2       | 00364   | 1600        | 2021-01-12 16:62:08
3   | 003       | 2021-08-15 17:00:00 | 7       | 00015   | 4150        | 2021-01-13 10:08:45
4   | 003       | 2021-08-15 17:00:00 | 9       | 00017   | 2950        | 2021-01-13 10:10:45

**Записи в заказах**

id  | type_ticket_id / type_ticket | count | price | barcodes                                 | equal_price
--- |------------------------------|-------|-------|------------------------------------------| ------------
1   | 001 / adult                  | 1     | 700   | [11111111]                               | 700
2   | 002 / kid                    | 2     | 800   | [22222222, 22222333]                     | 1600
3   | 001 / adult                  | 4     | 700   | [11111222, 11111223, 11111224, 11111225] | 2800
3   | 002 / kid                    | 3     | 450   | [22222444, 22222338, 22222336]           | 1350
4   | 001 / adult                  | 2     | 700   | [22666444, 21112338]                     | 1400
4   | 002 / kid                    | 3     | 450   | [77222444, 22882338, 22222300]           | 1350
4   | 003 / discount               | 4     | 300   | [22202444, 20222338, 02222336, 88222336] | 1200

   
**2.2 Время из A в B**  
Известно расписание отправления теплохода по московскому времени (GMT+3):
* из A в B:
    * 2021-08-21 18:00:00
    * 2021-08-21 18:30:00
    * 2021-08-21 18:45:00
    * 2021-08-21 19:00:00
    * 2021-08-21 19:15:00
    * 2021-08-21 21:00:00
* из B в A:
    * 2021-08-21 18:30:00
    * 2021-08-21 18:45:00
    * 2021-08-21 19:00:00
    * 2021-08-21 19:15:00
    * 2021-08-21 19:35:00
    * 2021-08-21 21:50:00
    * 2021-08-21 21:55:00

"из A в B" и "из B в A" стоимость одного билета 700р.  
"из A в B и обратно в А" стоимость составного билета 1200р.  
Время пути в одну сторону 50 минут.  

**Задача**
Сделать страницу (дизайн не имеет значения), на которой пользователь, выбрав направление, время и количество билетов, сможет посчитать итоговые значения: общую стоимость, время в пути.

### <p style="color:#32CD32">Решение</span> - https://trip-nine.vercel.app/pages/order.html

### Стек:
* HTML
* CSS
* JS  
* Bootstrap  
